{"ast":null,"code":"import{USER_API}from'./constants';import{useUser}from'../utilities/UserContext';// Import useUser hook\n// userReferralHandler.js\nexport const handleReferralOnLogin=(userId,callback)=>{const socket=new WebSocket(USER_API);socket.onopen=()=>{console.log('WebSocket connected');const request={action:'getUser',user_id:userId};socket.send(JSON.stringify(request));console.log('Request sent:',request);};socket.onmessage=event=>{const data=JSON.parse(event.data);console.log('Response received:',data);if(data&&data.feedback_questions&&data.feedback_questions.length>0){// Get the first five referrals (or fewer if there aren't enough)\nconst firstFiveReferrals=data.feedback_questions.slice(0,5).map(referral=>({referral_id:referral.referral_id,question:referral.question}));// Invoke the callback passing the list of referrals\ncallback(firstFiveReferrals);console.log('Referral data returned to callback:',firstFiveReferrals);}else{console.error('Error: No valid referral data');callback([]);// return an empty array if there's no valid data\n}};socket.onerror=error=>{console.error('WebSocket error:',error);};socket.onclose=event=>{if(event.wasClean){console.log('WebSocket closed cleanly');}else{console.error('WebSocket closed unexpectedly');}};};","map":{"version":3,"names":["USER_API","useUser","handleReferralOnLogin","userId","callback","socket","WebSocket","onopen","console","log","request","action","user_id","send","JSON","stringify","onmessage","event","data","parse","feedback_questions","length","firstFiveReferrals","slice","map","referral","referral_id","question","error","onerror","onclose","wasClean"],"sources":["/Users/pratikshawadibhasme/Desktop/ASU CIC/Brightpoint/frontend/src/utilities/userReferralHandler.js"],"sourcesContent":["import { USER_API } from './constants';\nimport { useUser } from '../utilities/UserContext'; // Import useUser hook\n\n// userReferralHandler.js\nexport const handleReferralOnLogin = (userId, callback) => {\n    const socket = new WebSocket(USER_API);\n  \n    socket.onopen = () => {\n      console.log('WebSocket connected');\n      const request = {\n        action: 'getUser',\n        user_id: userId\n      };\n      socket.send(JSON.stringify(request));\n      console.log('Request sent:', request);\n    };\n  \n    socket.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      console.log('Response received:', data);\n  \n      if (data && data.feedback_questions && data.feedback_questions.length > 0) {\n        // Get the first five referrals (or fewer if there aren't enough)\n        const firstFiveReferrals = data.feedback_questions.slice(0, 5).map(referral => ({\n          referral_id: referral.referral_id,\n          question: referral.question\n        }));\n  \n        // Invoke the callback passing the list of referrals\n        callback(firstFiveReferrals);\n        console.log('Referral data returned to callback:', firstFiveReferrals);\n      } else {\n        console.error('Error: No valid referral data');\n        callback([]); // return an empty array if there's no valid data\n      }\n    };\n  \n    socket.onerror = (error) => {\n      console.error('WebSocket error:', error);\n    };\n  \n    socket.onclose = (event) => {\n      if (event.wasClean) {\n        console.log('WebSocket closed cleanly');\n      } else {\n        console.error('WebSocket closed unexpectedly');\n      }\n    };\n  };\n  "],"mappings":"AAAA,OAASA,QAAQ,KAAQ,aAAa,CACtC,OAASC,OAAO,KAAQ,0BAA0B,CAAE;AAEpD;AACA,MAAO,MAAM,CAAAC,qBAAqB,CAAGA,CAACC,MAAM,CAAEC,QAAQ,GAAK,CACvD,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAAC,SAAS,CAACN,QAAQ,CAAC,CAEtCK,MAAM,CAACE,MAAM,CAAG,IAAM,CACpBC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC,CAClC,KAAM,CAAAC,OAAO,CAAG,CACdC,MAAM,CAAE,SAAS,CACjBC,OAAO,CAAET,MACX,CAAC,CACDE,MAAM,CAACQ,IAAI,CAACC,IAAI,CAACC,SAAS,CAACL,OAAO,CAAC,CAAC,CACpCF,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEC,OAAO,CAAC,CACvC,CAAC,CAEDL,MAAM,CAACW,SAAS,CAAIC,KAAK,EAAK,CAC5B,KAAM,CAAAC,IAAI,CAAGJ,IAAI,CAACK,KAAK,CAACF,KAAK,CAACC,IAAI,CAAC,CACnCV,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAES,IAAI,CAAC,CAEvC,GAAIA,IAAI,EAAIA,IAAI,CAACE,kBAAkB,EAAIF,IAAI,CAACE,kBAAkB,CAACC,MAAM,CAAG,CAAC,CAAE,CACzE;AACA,KAAM,CAAAC,kBAAkB,CAAGJ,IAAI,CAACE,kBAAkB,CAACG,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAACC,GAAG,CAACC,QAAQ,GAAK,CAC9EC,WAAW,CAAED,QAAQ,CAACC,WAAW,CACjCC,QAAQ,CAAEF,QAAQ,CAACE,QACrB,CAAC,CAAC,CAAC,CAEH;AACAvB,QAAQ,CAACkB,kBAAkB,CAAC,CAC5Bd,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAEa,kBAAkB,CAAC,CACxE,CAAC,IAAM,CACLd,OAAO,CAACoB,KAAK,CAAC,+BAA+B,CAAC,CAC9CxB,QAAQ,CAAC,EAAE,CAAC,CAAE;AAChB,CACF,CAAC,CAEDC,MAAM,CAACwB,OAAO,CAAID,KAAK,EAAK,CAC1BpB,OAAO,CAACoB,KAAK,CAAC,kBAAkB,CAAEA,KAAK,CAAC,CAC1C,CAAC,CAEDvB,MAAM,CAACyB,OAAO,CAAIb,KAAK,EAAK,CAC1B,GAAIA,KAAK,CAACc,QAAQ,CAAE,CAClBvB,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC,CACzC,CAAC,IAAM,CACLD,OAAO,CAACoB,KAAK,CAAC,+BAA+B,CAAC,CAChD,CACF,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}