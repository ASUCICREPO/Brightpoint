{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,Button,Typography,TextField,Link,InputAdornment,IconButton}from'@mui/material';import{Visibility,VisibilityOff}from'@mui/icons-material';import{useNavigate}from'react-router-dom';import BrightpointLogo from'../Assets/Brightpoint_logo.svg';import{useUser}from'../utilities/UserContext';// Import UserContext\nimport{handleReferralOnLogin}from\"../utilities/userReferralHandler\";// Import the referral handler\nimport{signIn,signOut}from'aws-amplify/auth';// Correct import for Auth\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminLanding=()=>{const{updateUser}=useUser();// Get updateUser function from context\nconst[username,setUsername]=useState('');const[password,setPassword]=useState('');const[showPassword,setShowPassword]=useState(false);const navigate=useNavigate();const zipcode=\"62701\";// Hardcoded zipcode for this example\n// Log out the previous user when the page loads\nuseEffect(()=>{const logoutPreviousUser=async()=>{try{await signOut();// Sign out the previous user (if any)\nconsole.log(\"Previous user logged out successfully.\");}catch(error){console.error(\"Error signing out the previous user:\",error.message||error);}};logoutPreviousUser();},[]);// Empty dependency array ensures this runs only once when the page loads\nconst handleLogin=async()=>{try{// Authenticate using Cognito\nconst user=await signIn({username,password});console.log('Cognito login success:',user);updateUser({username,zipcode});// Handle referrals\nhandleReferralOnLogin(username,referrals=>{if(referrals&&referrals.length>0){updateUser({referrals});console.log('Referrals updated in user context:',referrals);}else{console.error('Error: No referral data returned');}});navigate('/admindashboard');// Navigate to the next page\n}catch(error){console.error('Cognito login error:',error.message||error);alert('Login failed: '+(error.message||'Unknown error'));}};const isButtonDisabled=!username||!password;return/*#__PURE__*/_jsxs(Box,{height:\"100vh\",display:\"flex\",flexDirection:\"column\",justifyContent:\"center\",alignItems:\"center\",bgcolor:\"white\",children:[/*#__PURE__*/_jsx(\"img\",{src:BrightpointLogo,alt:\"Brightpoint Logo\",height:\"50\",style:{marginBottom:10}}),/*#__PURE__*/_jsxs(Box,{width:\"100%\",maxWidth:\"400px\",bgcolor:\"white\",p:4,borderRadius:4,boxShadow:3,display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"#1F1463\",gutterBottom:true,fontWeight:\"bold\",children:\"Log In\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",alignSelf:\"flex-start\",mb:0.5,children:\"Username:\"}),/*#__PURE__*/_jsx(TextField,{placeholder:\"Enter your username\",variant:\"outlined\",fullWidth:true,margin:\"normal\",value:username,onChange:e=>setUsername(e.target.value),sx:{backgroundColor:'#f0f0f0',borderRadius:'12px','& .MuiOutlinedInput-root':{borderRadius:'12px'}}}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",alignSelf:\"flex-start\",mt:2,mb:0.5,children:\"Password:\"}),/*#__PURE__*/_jsx(TextField,{placeholder:\"Enter your password\",variant:\"outlined\",fullWidth:true,margin:\"normal\",type:showPassword?'text':'password',value:password,onChange:e=>setPassword(e.target.value),sx:{backgroundColor:'#f0f0f0',borderRadius:'12px','& .MuiOutlinedInput-root':{borderRadius:'12px'}},InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{onClick:()=>setShowPassword(!showPassword),edge:\"end\",children:showPassword?/*#__PURE__*/_jsx(VisibilityOff,{}):/*#__PURE__*/_jsx(Visibility,{})})})}}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"error\",fullWidth:true,sx:{borderRadius:'20px',mt:2,backgroundColor:isButtonDisabled?'#cccccc':'#1F1463','&:hover':{backgroundColor:isButtonDisabled?'#cccccc':'#3724AD'}},disabled:isButtonDisabled,onClick:handleLogin,children:\"Log In\"})]})]});};export default AdminLanding;","map":{"version":3,"names":["React","useState","useEffect","Box","Button","Typography","TextField","Link","InputAdornment","IconButton","Visibility","VisibilityOff","useNavigate","BrightpointLogo","useUser","handleReferralOnLogin","signIn","signOut","jsx","_jsx","jsxs","_jsxs","AdminLanding","updateUser","username","setUsername","password","setPassword","showPassword","setShowPassword","navigate","zipcode","logoutPreviousUser","console","log","error","message","handleLogin","user","referrals","length","alert","isButtonDisabled","height","display","flexDirection","justifyContent","alignItems","bgcolor","children","src","alt","style","marginBottom","width","maxWidth","p","borderRadius","boxShadow","variant","color","gutterBottom","fontWeight","alignSelf","mb","placeholder","fullWidth","margin","value","onChange","e","target","sx","backgroundColor","mt","type","InputProps","endAdornment","position","onClick","edge","disabled"],"sources":["/Users/pratikshawadibhasme/Desktop/ASU CIC/Brightpoint/frontend/src/Pages/AdminLanding.jsx"],"sourcesContent":["import React, { useState , useEffect} from 'react';\nimport { Box, Button, Typography, TextField, Link, InputAdornment, IconButton } from '@mui/material';\nimport { Visibility, VisibilityOff } from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\nimport BrightpointLogo from '../Assets/Brightpoint_logo.svg';\nimport { useUser } from '../utilities/UserContext'; // Import UserContext\nimport { handleReferralOnLogin } from \"../utilities/userReferralHandler\"; // Import the referral handler\nimport { signIn, signOut } from 'aws-amplify/auth'; // Correct import for Auth\n\nconst AdminLanding = () => {\n  const { updateUser } = useUser(); // Get updateUser function from context\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const navigate = useNavigate();\n  const zipcode = \"62701\"; // Hardcoded zipcode for this example\n\n  // Log out the previous user when the page loads\n  useEffect(() => {\n    const logoutPreviousUser = async () => {\n      try {\n        await signOut(); // Sign out the previous user (if any)\n        console.log(\"Previous user logged out successfully.\");\n      } catch (error) {\n        console.error(\"Error signing out the previous user:\", error.message || error);\n      }\n    };\n\n    logoutPreviousUser();\n  }, []); // Empty dependency array ensures this runs only once when the page loads\n\n  const handleLogin = async () => {\n    try {\n      // Authenticate using Cognito\n      const user = await signIn({ username, password });\n      console.log('Cognito login success:', user);\n\n      updateUser({ username, zipcode });\n\n      // Handle referrals\n      handleReferralOnLogin(username, (referrals) => {\n        if (referrals && referrals.length > 0) {\n          updateUser({ referrals });\n          console.log('Referrals updated in user context:', referrals);\n        } else {\n          console.error('Error: No referral data returned');\n        }\n      });\n\n      navigate('/admindashboard'); // Navigate to the next page\n\n    } catch (error) {\n      console.error('Cognito login error:', error.message || error);\n      alert('Login failed: ' + (error.message || 'Unknown error'));\n    }\n  };\n\n  const isButtonDisabled = !username || !password;\n\n  return (\n    <Box height=\"100vh\" display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\" bgcolor=\"white\">\n      \n      {/* Logo above the container */}\n      <img src={BrightpointLogo} alt=\"Brightpoint Logo\" height=\"50\" style={{ marginBottom: 10 }} />\n\n      <Box\n        width=\"100%\"\n        maxWidth=\"400px\"\n        bgcolor=\"white\"\n        p={4}\n        borderRadius={4}\n        boxShadow={3}\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n      >\n        <Typography variant=\"h4\" color=\"#1F1463\" gutterBottom fontWeight=\"bold\">\n          Log In\n        </Typography>\n\n        {/* Username Label */}\n        <Typography variant=\"body1\" alignSelf=\"flex-start\" mb={0.5}>\n          Username:\n        </Typography>\n        <TextField\n          placeholder=\"Enter your username\"\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          value={username}\n          onChange={(e) => setUsername(e.target.value)}\n          sx={{\n            backgroundColor: '#f0f0f0',\n            borderRadius: '12px',\n            '& .MuiOutlinedInput-root': {\n              borderRadius: '12px',\n            },\n          }}\n        />\n\n        {/* Password Label */}\n        <Typography variant=\"body1\" alignSelf=\"flex-start\" mt={2} mb={0.5}>\n          Password:\n        </Typography>\n        <TextField\n          placeholder=\"Enter your password\"\n          variant=\"outlined\"\n          fullWidth\n          margin=\"normal\"\n          type={showPassword ? 'text' : 'password'}\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          sx={{\n            backgroundColor: '#f0f0f0',\n            borderRadius: '12px',\n            '& .MuiOutlinedInput-root': {\n              borderRadius: '12px',\n            },\n          }}\n          InputProps={{\n            endAdornment: (\n              <InputAdornment position=\"end\">\n                <IconButton onClick={() => setShowPassword(!showPassword)} edge=\"end\">\n                  {showPassword ? <VisibilityOff /> : <Visibility />}\n                </IconButton>\n              </InputAdornment>\n            ),\n          }}\n        />\n\n        {/* Log In Button */}\n        <Button\n          variant=\"contained\"\n          color=\"error\"\n          fullWidth\n          sx={{\n            borderRadius: '20px',\n            mt: 2,\n            backgroundColor: isButtonDisabled ? '#cccccc' : '#1F1463',\n            '&:hover': {\n              backgroundColor: isButtonDisabled ? '#cccccc' : '#3724AD',\n            },\n          }}\n          disabled={isButtonDisabled}\n          onClick={handleLogin}\n        >\n          Log In\n        </Button>\n      </Box>\n\n      {/* Sign Up Text outside the box\n      <Box mt={2}>\n        <Typography variant=\"body2\">\n          Donâ€™t have an account?{' '}\n          <Link href=\"/newsignup\" color=\"#0000FF\">\n            Sign Up\n          </Link>\n          {' '}to create an account\n        </Typography>\n      </Box> */}\n\n    </Box>\n  );\n};\n\nexport default AdminLanding;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}